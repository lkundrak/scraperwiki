{% extends "frontend/base.html" %}
{% block title %}Find datasets{% endblock %}
{% block rss %}<link rel="alternate" type="application/rss+xml" title="RSS" href="/feeds/latest_code_objects_by_search_term/{{ query }}" />{% endblock %}

{% block header %}
	<h2>Search results for <form id="frmSearchResults" class="inline_form" action="/search/" method="POST">
        {% csrf_token %}        
        {{ form.q }}
        <input type="submit" value="Go" />
    </form></h2>
    <p>
      {{ scrapers_num_results }} result{{scrapers_num_results|pluralize}} found &bull; 
      <a href="/feeds/latest_code_objects_by_search_term/{{ query }}">Create RSS feed for this search term</a>
    </p>
{% endblock %}

{% block content %}
    <div class="content">
        {% if tags %}
            <div class="tag_suggestion">
                {% if tags|length_is:"1" %}
                    <a  href="{% url single_tag tags.0.name %}" class="yes">Yes! Show me</a>
                    <h4>Are you looking for all scrapers <em>tagged</em> with 
                    <a href="{% url single_tag tags.0.name %}" class="single_tag">{{tags.0.name}}</a>?</h4>
                {% else %}
                    <h4>Looking for all scrapers with a certain <em>tag</em>? Choose one:
                    {% for tag in tags %}
                        <a href="{% url single_tag tag.name %}" class="single_tag">{{tag.name}}</a>
                    {% endfor %}
                {% endif %}

            </div>
        {% endif %}

        {% if scrapers %}
            <ul class="scraper_list">
                {% for code in scrapers %}
                    {% include 'frontend/includes/code_object_line.html' %}
                {% endfor %}
            </ul>
        {% else %}
            <p>No scrapers found</p>
        {% endif %}
        

    </div>
{% endblock %}
